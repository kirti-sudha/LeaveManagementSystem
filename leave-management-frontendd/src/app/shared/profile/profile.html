<div class="profile-card" *ngIf="profile">
  <div class="profile-header">
    <h3>My Profile</h3>
    <!-- <button class="btn-edit" (click)="toggleEdit()">{{ isEditing ? 'Cancel' : 'Edit' }}</button> -->
  </div>

  <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

  <!-- View Mode -->
  <div *ngIf="!isEditing" class="profile-view">
    <div class="profile-picture">
        <img src="assets/default-avatar.png" alt="Profile Picture">
    </div>
    <h4>{{ profile.name }}</h4>
    <p class="designation">{{ profile.designation }}</p>
    <hr>
    <div class="profile-details">
        <p><strong>Employee ID:</strong> <span>{{ profile.employeeId }}</span></p>
        <p><strong>Email:</strong> <span>{{ profile.officialEmail }}</span></p>
        <p><strong>Phone:</strong> <span>{{ profile.phoneNumber }}</span></p>
        <p><strong>Department:</strong> <span>{{ profile.department }}</span></p>
        <p><strong>Role:</strong> <span>{{ profile.role }}</span></p>
        <p><strong>Joined On:</strong> <span>{{ profile.dateOfJoining | date }}</span></p>
        <p><strong>Reporting Manager:</strong> <span>{{ profile.reportingManagerName }}</span></p>
        <p><strong>Address:</strong> <span>{{ profile.address }}</span></p>
        <p><strong>Emergency Contact:</strong> <span>{{ profile.emergencyContact }}</span></p>
    </div>
  </div>

  <!-- Edit Mode -->
  <div *ngIf="isEditing && editableProfile" class="profile-edit">
    <form #profileForm="ngForm" (ngSubmit)="onSubmit(profileForm)">
      <!-- Editable Fields -->
      <div class="form-group">
        <label for="name">Full Name</label>
        <input type="text" id="name" name="name" [(ngModel)]="editableProfile.name" required>
      </div>
      <div class="form-group">
        <label for="phone">Phone Number</label>
        <input type="text" id="phone" name="phone" [(ngModel)]="editableProfile.phoneNumber" required>
      </div>
      <div class="form-group">
        <label for="address">Address</label>
        <input type="text" id="address" name="address" [(ngModel)]="editableProfile.address" required>
      </div>
      <div class="form-group">
        <label for="emergency">Emergency Contact</label>
        <input type="text" id="emergency" name="emergency" [(ngModel)]="editableProfile.emergencyContact" required>
      </div>
      <div class="form-group">
        <label for="password">New Password (optional)</label>
        <input type="password" id="password" name="password" [(ngModel)]="editableProfile.password">
      </div>
      
      <!-- Non-Editable Fields for Display -->
      <div class="form-group-static">
        <strong>Employee ID:</strong> {{ editableProfile.employeeId }}
      </div>
      <div class="form-group-static">
        <strong>Email:</strong> {{ editableProfile.officialEmail }}
      </div>
      <!-- Admin-only editable fields would go here -->

      <button type="submit" class="btn-save" [disabled]="profileForm.invalid">Save Changes</button>
    </form>
  </div>
</div>

<div *ngIf="!profile && !errorMessage" class="loading">
  Loading profile...
</div>